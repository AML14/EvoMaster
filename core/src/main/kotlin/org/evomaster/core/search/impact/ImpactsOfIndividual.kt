package org.evomaster.core.search.impact

/**
 * created by manzh on 2019-10-31
 */
class ImpactsOfIndividual(
        /**
         * key -> id of genes generated by [GeneIdUtil]
         * value -> impact info
         */
        val impactsOfGenes : MutableMap<String, GeneImpact> = mutableMapOf(),
        /**
         * a history of structures of [this] with best fitness
         */
        val impactsOfStructure : ActionStructureImpact = ActionStructureImpact("StructureSize"),
        /**
         * key -> target id
         * value -> fitness value
         */
        val reachedTargets : MutableMap<Int, Double> = mutableMapOf()
) {

    fun copy() : ImpactsOfIndividual{
        return ImpactsOfIndividual(
                impactsOfGenes.map { it.key to it.value.copy() }.toMap().toMutableMap(),
                impactsOfStructure.copy(),
                reachedTargets.map { it.key to it.value }.toMap().toMutableMap()
        )
    }

    fun clone() : ImpactsOfIndividual{
        return ImpactsOfIndividual(
                impactsOfGenes.map { it.key to it.value.clone() }.toMap().toMutableMap(),
                impactsOfStructure.clone(),
                reachedTargets.map { it.key to it.value }.toMap().toMutableMap()
        )
    }
}